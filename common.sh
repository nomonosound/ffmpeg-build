#!/usr/bin/env bash

FFMPEG_VERSION=5.1.4
FFMPEG_TARBALL=ffmpeg-$FFMPEG_VERSION.tar.bz2
FFMPEG_TARBALL_URL=http://ffmpeg.org/releases/$FFMPEG_TARBALL

FFMPEG_CONFIGURE_FLAGS=(
  # Disable uneeded components
  --disable-avdevice
  --disable-bzlib
  --disable-everything
  --disable-debug
  --disable-doc
  --disable-iconv
  --disable-network
  --disable-pixelutils
  --disable-programs
  --disable-postproc
  --disable-shared
  --disable-swscale
  --disable-zlib
  # Disable unneeded hardware acceleration (mainly video-specific)
  --disable-amf
  --disable-audiotoolbox
  --disable-cuvid
  --disable-d3d11va
  --disable-dxva2
  --disable-nvenc
  --disable-nvdec
  --disable-v4l2-m2m
  --disable-vaapi
  --disable-vdpau
  --disable-videotoolbox
  # Reenable what we need
  --enable-decoder=aac*
  --enable-decoder=ac3
  --enable-decoder=adpcm*
  --enable-decoder=alac
  --enable-decoder=als
  --enable-decoder=ape
  --enable-decoder=atrac*
  --enable-decoder=dsd*
  --enable-decoder=eac3
  --enable-decoder=flac
  --enable-decoder=gsm*
  --enable-decoder=mp1*
  --enable-decoder=mp2*
  --enable-decoder=mp3*
  --enable-decoder=mpc*
  --enable-decoder=opus
  --enable-decoder=pcm*
  --enable-decoder=ra*
  --enable-decoder=ralf
  --enable-decoder=shorten
  --enable-decoder=tak
  --enable-decoder=tta
  --enable-decoder=vorbis
  --enable-decoder=wavpack
  --enable-decoder=wmalossless
  --enable-decoder=wmapro
  --enable-decoder=wmav1
  --enable-decoder=wmav2
  --enable-decoder=wmavoice
  --enable-demuxer=aac
  --enable-demuxer=ac3
  --enable-demuxer=aiff
  --enable-demuxer=ape
  --enable-demuxer=asf
  --enable-demuxer=au
  --enable-demuxer=avi
  --enable-demuxer=dsf
  --enable-demuxer=flac
  --enable-demuxer=flv
  --enable-demuxer=image2
  --enable-demuxer=m4v
  --enable-demuxer=matroska
  --enable-demuxer=mov
  --enable-demuxer=mp3
  --enable-demuxer=mpc
  --enable-demuxer=mpc8
  --enable-demuxer=ogg
  --enable-demuxer=pcm*
  --enable-demuxer=rm
  --enable-demuxer=shorten
  --enable-demuxer=tak
  --enable-demuxer=tta
  --enable-demuxer=wav
  --enable-demuxer=wv
  --enable-demuxer=xwma
  --enable-encoder=flac
  --enable-encoder=libopus
  --enable-encoder=libmp3lame
  --enable-encoder=pcm*
  --enable-ffmpeg
  --enable-ffprobe
  --enable-filter=aformat
  --enable-filter=anull
  --enable-filter=aresample
  --enable-filter=atrim
  --enable-filter=channelmap
  --enable-filter=channelsplit
  --enable-filter=format
  --enable-filter=null
  --enable-filter=pan
  --enable-filter=setpts
  --enable-filter=trim
  --enable-libmp3lame
  --enable-libopus
  --enable-muxer=mp3
  --enable-muxer=ogg
  --enable-muxer=opus
  --enable-muxer=pcm*
  --enable-muxer=wav
  --enable-parser=aac
  --enable-parser=aac_latm
  --enable-parser=ac3
  --enable-parser=cook
  --enable-parser=dca
  --enable-parser=flac
  --enable-parser=gsm
  --enable-parser=mpegaudio
  --enable-parser=tak
  --enable-parser=vorbis
  --enable-pic
  --enable-protocol=file
  --enable-protocol=pipe
  --enable-rdft
  --enable-static
)
